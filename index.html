<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>SWOC Reflection üåü</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<style>
  * {margin:0; padding:0; box-sizing:border-box;}
  body {font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height:100vh; position:relative; overflow-x:hidden;}
  .bg-circles {position:fixed; top:0; left:0; width:100%; height:100%; overflow:hidden; z-index:0; pointer-events:none;}
  .circle {position:absolute; border-radius:50%; background:rgba(255,255,255,0.1); animation:float 20s infinite ease-in-out;}
  .circle:nth-child(1){width:80px;height:80px;left:10%;animation-duration:25s;}
  .circle:nth-child(2){width:120px;height:120px;right:15%;top:20%;animation-duration:30s;animation-delay:2s;}
  .circle:nth-child(3){width:60px;height:60px;left:50%;top:60%;animation-duration:20s;animation-delay:4s;}
  @keyframes float {0%,100%{transform:translateY(0) translateX(0);opacity:0.3;}25%{transform:translateY(-100px) translateX(50px);opacity:0.5;}50%{transform:translateY(-200px) translateX(-50px);opacity:0.3;}75%{transform:translateY(-100px) translateX(100px);opacity:0.5;}}
  .container{max-width:800px;margin:0 auto;padding:10px;position:relative;z-index:1;}
  .form-container{background:rgba(255,255,255,0.95);border-radius:20px;padding:40px;box-shadow:0 20px 60px rgba(0,0,0,0.3);backdrop-filter:blur(10px);margin-bottom:20px;}
  h1{text-align:center;color:#667eea;margin-bottom:10px;font-size:2.5rem;font-weight:700;}
  h2{text-align:center;color:#764ba2;margin-bottom:30px;font-size:1.5rem;font-weight:500;}
  .form-group{margin-bottom:25px;}
  label{display:block;margin-bottom:8px;color:#333;font-weight:600;font-size:1.1rem;}
  input, select, textarea{width:100%;padding:12px 16px;border:2px solid #e0e0e0;border-radius:10px;font-size:1rem;transition:all 0.3s ease;background:white;}
  input:focus, select:focus, textarea:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px rgba(102,126,234,0.1);}
  button{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;border:none;padding:14px 32px;border-radius:10px;font-size:1.1rem;font-weight:600;cursor:pointer;transition:all 0.3s ease;display:inline-block;margin-top:10px;}
  button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(102,126,234,0.4);}
  button:disabled{opacity:0.5;cursor:not-allowed;transform:none;}
  .swoc-page{background:rgba(255,255,255,0.95);border-radius:20px;padding:30px;box-shadow:0 10px 30px rgba(0,0,0,0.2);margin-bottom:20px;}
  .swoc-container{display:flex;flex-direction:column;gap:15px;}
  .swoc-box label{display:block;margin-bottom:5px;font-weight:600;color:#333;}
  .hidden{display:none;}
  #timerDisplay{background:rgba(255,255,255,0.95);padding:15px 20px;border-radius:15px;margin-bottom:10px;box-shadow:0 4px 15px rgba(0,0,0,0.1);text-align:center;font-size:1.3rem;font-weight:700;color:#667eea;}
  @media(max-width:768px){.container{padding:5px;}.form-container{padding:20px;}h1{font-size:1.8rem;}h2{font-size:1.2rem;}}
</style>
</head>
<body>
<div class="bg-circles"><div class="circle"></div><div class="circle"></div><div class="circle"></div></div>
<div class="container">
  <!-- Initial Form -->
  <div id="initialForm" class="form-container">
    <h1>SRM Valliammai Engineering College</h1>
    <h2>SWOC Self Reflection üåü</h2>
    <div class="form-group">
      <label for="studentName">üë§ Your Name:</label>
      <input type="text" id="studentName" placeholder="Enter your name">
    </div>
    <div class="form-group">
      <label for="department">üè´ Department:</label>
      <select id="department">
        <option value="">-- Select Department --</option>
        <option value="Cyber Security">Cyber Security</option>
        <option value="CSE-1">CSE-1</option>
        <option value="CSE-2">CSE-2</option>
        <option value="CSE-3">CSE-3</option>
        <option value="Mechanical Engineering">Mechanical Engineering</option>
        <option value="ECE-1">ECE-1</option>
        <option value="ECE-2">ECE-2</option>
        <option value="ECE-3">ECE-3</option>
        <option value="AI DS-1">AI DS-1</option>
        <option value="AI DS-2">AI DS-2</option>
        <option value="Civil">Civil</option>
        <option value="Agri">Agri</option>
        <option value="EEE">EEE</option>
        <option value="EIE">EIE</option>
        <option value="Medical Electronics">Medical Electronics</option>
        <option value="IT-1">IT-1</option>
        <option value="IT-2">IT-2</option>
      </select>
    </div>
    <button id="startBtn" disabled onclick="startSWOC()">Begin Reflection üöÄ</button>
  </div>

  <!-- SWOC Pages -->
<!-- SWOC Pages (1-6) -->
<div id="swocSection" class="hidden">
  <div id="timerDisplay">‚è±Ô∏è Time: 0s</div>

  <!-- Page 1 -->
  <div class="swoc-page hidden" id="page-1">
    <h3>Page 1: Self Reflection as a Daughter, Son. Minimum 12 words </h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Patience ‚Äì I listen calmly when my mother repeats the same story because it makes her feel heard and valued.</label>
        <textarea id="strength-1" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Over-sensitivity ‚Äì I take my father‚Äôs criticism too personally and end up feeling hurt instead of improving.</label>
        <textarea id="weakness-1" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Communication ‚Äì By sharing my daily experiences honestly, I can build more trust and openness at home.</label>
        <textarea id="opportunity-1" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Balancing independence and respect ‚Äì I want to make my own choices while still honouring my parents‚Äô advice.</label>
        <textarea id="challenge-1" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Reflective ‚Äì I often replay conversations with my parents in my mind to understand their point of view better.</label>
        <textarea id="adjective-1" rows="2"></textarea>
      </div>
    </div>
    <button id="next1" disabled onclick="nextPage()">Next ‚û°</button>
  </div>

  <!-- Page 2 -->
  <div class="swoc-page hidden" id="page-2">
    <h3>Page 2: Self Reflection as a Friend. Minimum 12 words</h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Loyalty ‚Äì I stand by my friends during difficult times and never reveal their personal matters to others.</label>
        <textarea id="strength-2" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Over-involvement ‚Äì I sometimes get too emotionally invested in my friends‚Äô problems and forget my own boundaries.</label>
        <textarea id="weakness-2" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Building empathy ‚Äì By listening without judging, I can help my friends feel safe and understood.</label>
        <textarea id="opportunity-2" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Managing differences ‚Äì When my friends and I disagree, I find it hard to express my opinion without sounding defensive.</label>
        <textarea id="challenge-2" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Supportive ‚Äì I regularly check in on my friends to remind them that they‚Äôre not alone, even when I‚Äôm busy.</label>
        <textarea id="adjective-2" rows="2"></textarea>
      </div>
    </div>
    <button id="next2" disabled onclick="nextPage()">Next ‚û°</button>
  </div>

  <!-- Page 3 -->
  <div class="swoc-page hidden" id="page-3">
    <h3>Page 3: Self Reflection as a Classmate. Minimum 12 words</h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Cooperation ‚Äì I willingly share notes and help classmates who miss lessons so everyone can stay on track.</label>
        <textarea id="strength-3" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Distraction ‚Äì I sometimes start side conversations during group work, which slows down our progress.</label>
        <textarea id="weakness-3" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Collaboration ‚Äì By learning to divide tasks fairly, I can improve teamwork and group performance.</label>
        <textarea id="opportunity-3" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Handling conflicts ‚Äì When opinions clash in group projects, I struggle to stay neutral and calm.</label>
        <textarea id="challenge-3" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Approachable ‚Äì My classmates feel comfortable asking me for help because I respond kindly and without judgment.</label>
        <textarea id="adjective-3" rows="2"></textarea>
      </div>
    </div>
    <button id="next3" disabled onclick="nextPage()">Next ‚û°</button>
  </div>

  <!-- Page 4 -->
  <div class="swoc-page hidden" id="page-4">
    <h3>Page 4: Self Reflection as a Student. Minimum 12 words</h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Curiosity ‚Äì I enjoy asking questions in class and exploring topics beyond the textbook to understand concepts deeply.</label>
        <textarea id="strength-4" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Procrastination ‚Äì I tend to postpone assignments until the last minute, which affects the quality of my work.</label>
        <textarea id="weakness-4" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Time management ‚Äì By planning a daily study routine, I can balance academics with personal growth activities.</label>
        <textarea id="opportunity-4" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Concentration ‚Äì I find it difficult to stay focused during long lectures or when studying in noisy environments.</label>
        <textarea id="challenge-4" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Determined ‚Äì Even when subjects feel hard, I keep trying until I understand the topic clearly.</label>
        <textarea id="adjective-4" rows="2"></textarea>
      </div>
    </div>
    <button id="next4" disabled onclick="nextPage()">Next ‚û°</button>
  </div>

  <!-- Page 5 -->
  <div class="swoc-page hidden" id="page-5">
    <h3>Page 5: Self Reflection as a Youngster. Minimum 12 words</h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Enthusiasm ‚Äì I approach new activities with energy and curiosity, eager to learn and explore.</label>
        <textarea id="strength-5" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Impulsiveness ‚Äì I sometimes act without thinking, which can lead to mistakes or misunderstandings.</label>
        <textarea id="weakness-5" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Skill-building ‚Äì By participating in clubs and activities, I can discover hidden talents and improve abilities.</label>
        <textarea id="opportunity-5" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Peer pressure ‚Äì I sometimes struggle to make my own choices when friends influence me.</label>
        <textarea id="challenge-5" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Curious ‚Äì I ask questions and explore ideas to understand the world around me.</label>
        <textarea id="adjective-5" rows="2"></textarea>
      </div>
    </div>
    <button id="next5" disabled onclick="nextPage()">Next ‚û°</button>
  </div>

  <!-- Page 6 -->
  <div class="swoc-page hidden" id="page-6">
    <h3>Page 6: Self Reflection as a Social Being. Minimum 12 words</h3>
    <div class="swoc-container">
      <div class="swoc-box">
        <label>Strength and Reason: e.g., Empathy ‚Äì I try to understand the feelings of others in my community and offer support when needed.</label>
        <textarea id="strength-6" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Weakness and Reason: e.g., Hesitation ‚Äì I sometimes avoid speaking up in group discussions, even when I have valuable ideas.</label>
        <textarea id="weakness-6" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Opportunity and Reason: e.g., Leadership ‚Äì By volunteering in social initiatives, I can develop my ability to organize and guide others.</label>
        <textarea id="opportunity-6" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Challenge and Reason: e.g., Conflict resolution ‚Äì I need to learn how to mediate disagreements calmly and fairly.</label>
        <textarea id="challenge-6" rows="2"></textarea>
      </div>
      <div class="swoc-box">
        <label>Adjective and Reason: e.g., Responsible ‚Äì I make an effort to contribute positively to my surroundings and community.</label>
        <textarea id="adjective-6" rows="2"></textarea>
      </div>
    </div>
    <button id="next6" disabled onclick="finishSWOC()">Finish ‚úÖ</button>
  </div>
</div>

  <!-- Scorecard -->
  <div id="scorecard" class="hidden">
    <h3>üìä Submission Summary</h3>
    <div id="scorecardContent"></div>
    <div class="action-buttons">
      <button onclick="downloadPDF()">Download PDF üìÑ</button>
      <button onclick="resetForm()">Create New Reflection üîÑ</button>
    </div>
  </div>
</div>

 <script>
let studentName="", department="", startTime=0, timerInterval=null, currentPage=1;

// Timer
function startTimer() {
  startTime=Date.now();
  timerInterval=setInterval(()=>{
    const elapsed=Math.floor((Date.now()-startTime)/1000);
    document.getElementById("timerDisplay").innerText=`‚è±Ô∏è Time: ${elapsed}s`;
  },1000);
}
function stopTimer(){if(timerInterval){clearInterval(timerInterval); timerInterval=null;}}

// --- Prevent Copy & Paste ---
window.onload = () => {
  document.querySelectorAll("textarea").forEach(t=>{
    // Block right-click copy/paste
    t.addEventListener("copy", e=>e.preventDefault());
    t.addEventListener("cut", e=>e.preventDefault());
    t.addEventListener("paste", e=>e.preventDefault());
    // Block Gboard long insertions
    t.addEventListener("input", e=>{
      if((e.data && e.data.length>10) || e.inputType==="insertFromPaste"){
        e.target.value = e.target.value.slice(0, -e.data.length);
      }
    });
    // Block drag & drop
    t.addEventListener("drop", e=>e.preventDefault());
  });
};

// SWOC Next button validation
function setupValidation(pageNum, minWords = 12){
  const inputs = document.querySelectorAll(`#page-${pageNum} textarea`);
  const nextBtn = document.getElementById(`next${pageNum}`);
  inputs.forEach(input => {
    input.addEventListener('input', () => {
      const allFilled = Array.from(inputs).every(i => i.value.trim().split(/\s+/).length >= minWords);
      nextBtn.disabled = !allFilled;
    });
  });
}
for(let p=1; p<=6; p++){ setupValidation(p); }

// Start reflection
function startSWOC(){
  studentName=document.getElementById("studentName").value.trim();
  department=document.getElementById("department").value;
  if(!studentName){alert("Enter your name"); return;}
  if(!department){alert("Select department"); return;}
  document.getElementById("initialForm").classList.add("hidden");
  document.getElementById("swocSection").classList.remove("hidden");
  document.getElementById("page-1").classList.remove("hidden");
  startTimer();
}

// Navigate pages
function nextPage(){
  document.getElementById(`page-${currentPage}`).classList.add("hidden");
  currentPage++;
  document.getElementById(`page-${currentPage}`).classList.remove("hidden");
}

// Finish and submit
function finishSWOC(){
  stopTimer();
  const totalTimeSeconds = Math.floor((Date.now()-startTime)/1000);
  const data=[];
  for(let p=1;p<=6;p++){
    data.push({
      strength:document.getElementById(`strength-${p}`).value.trim(),
      weakness:document.getElementById(`weakness-${p}`).value.trim(),
      opportunity:document.getElementById(`opportunity-${p}`).value.trim(),
      challenge:document.getElementById(`challenge-${p}`).value.trim(),
      adjective:document.getElementById(`adjective-${p}`).value.trim()
    });
  }
  const reflectionsStr = data.map((p,i)=>{
    return `Page ${i+1}: Strength: ${p.strength}, Weakness: ${p.weakness}, Opportunity: ${p.opportunity}, Challenge: ${p.challenge}, Adjective: ${p.adjective}`;
  });
  const payload = {
    studentName,
    fixedC: 25,
    fixedD: 0, 
    totalTime: totalTimeSeconds, 
    department, 
    fixedG: "ELLL 9", 
    reflections: reflectionsStr
  };
  fetch("https://script.google.com/macros/s/AKfycbxA0lRkERWFt2cYfmm04IQioaG4-21k5VFF5CFKP30zyVaJXM5_27PL3v8JIZEweK3u/exec", {
    method:"POST", mode:"no-cors", headers:{"Content-Type":"application/json"}, body:JSON.stringify(payload)
  });
  document.getElementById("swocSection").classList.add("hidden");
  document.getElementById("scorecard").classList.remove("hidden");
  let content=`<p>üë§ <strong>Student:</strong> ${studentName}</p><p>üè´ <strong>Department:</strong> ${department}</p>`;
  data.forEach((p,i)=>{
    content+=`<p>üåü Page ${i+1} Reflection:</p>
    <p>Strength: ${p.strength}</p>
    <p>Weakness: ${p.weakness}</p>
    <p>Opportunity: ${p.opportunity}</p>
    <p>Challenge: ${p.challenge}</p>
    <p>Adjective: ${p.adjective}</p>`;
  });
  document.getElementById("scorecardContent").innerHTML=content;
}

// Download PDF
function downloadPDF(){
  const { jsPDF } = window.jspdf;
  const doc=new jsPDF();
  let y=20;
  doc.setFontSize(16);
  doc.text(`SWOC Reflection - ${studentName}`, 20, y); y+=10;
  doc.setFontSize(12);
  for(let p=1;p<=6;p++){
    y+=10; doc.text(`Page ${p}:`, 20, y); y+=5;
    ['strength','weakness','opportunity','challenge','adjective'].forEach(field=>{
      const val=document.getElementById(`${field}-${p}`).value.trim();
      doc.text(`${field.charAt(0).toUpperCase()+field.slice(1)}: ${val}`,20,y); y+=7;
    });
    if(y>260){doc.addPage();y=20;}
  }
  doc.save(`SWOC_${studentName}.pdf`);
}

// Reset
function resetForm(){location.reload();}

// --- Name & Department validation ---
const nameInput = document.getElementById("studentName");
const deptSelect = document.getElementById("department");
const startBtn = document.getElementById("startBtn");

function validateInitialForm() {
  const nameFilled = nameInput.value.trim() !== "";
  const deptSelected = deptSelect.value !== "";
  startBtn.disabled = !(nameFilled && deptSelected);
}

nameInput.addEventListener("input", validateInitialForm);
deptSelect.addEventListener("change", validateInitialForm);
</script>
</body>
</html>
